<html>

<head>
	<style type="text/css">
        body {
            background-color: #CCCCCC;
        }
    </style>
    
    <script>
        function setBase(name, title_name ,start){
            let title_id = name+'_title';
            let open_id = name+'_open';
            let title = document.createElement('a');
            title.id = title_id;
            title.style = 'cursor:pointer; user-select:none;';
            
            let open = document.createElement('div');
            open.id = open_id;
            open.style = 'display:none; clear:both; cursor:pointer;';

            let init = false;

            addEventListener('load' ,function(){
                title.textContent = '▼ '+title_name;
            })
            title.addEventListener('click',function(){
                let open_style = open.style;
                if(open_style.display === 'none'){
                    open_style.display = 'block';
                    title.textContent = '▲ '+title_name;

                    if(!init){
                        init = true;
                        start();
                    }
                }else{
                    open_style.display = 'none';
                    title.textContent = '▼ '+title_name;
                }
            });

            let base = document.createElement('span');
            base.appendChild( title );
            base.appendChild( open );
            let parent = document.getElementById(name);
            parent.appendChild( base );
            
            return open;
        }
    </script>
</head>

<body>
    <!-- trp2 -->
    クリア
    <!-- /trp2 -->

    <br>
    <br>

    <!-- trp3 -->
    <div style="background-color:#ffcc99;">
        <!-- 折り畳み展開ポインタ -->
        <a id="trp3_title" style="cursor:pointer;" onclick="obj=document.getElementById('trp3_open').style; obj.display=(obj.display=='none')?'block':'none';">
            trp3_dummy
            <script>
                var trp3_title_1 = '▼ trp_story_3';
                var trp3_title_2 = '▲ trp_story_3';
                addEventListener('load' ,function(){
                    document.getElementById('trp3_title').innerHTML = trp3_title_1;
                })
                document.getElementById('trp3_title').addEventListener('click' ,function(){
                    var elm = document.getElementById('trp3_title');
                    if(elm.innerHTML === trp3_title_1)  {elm.innerHTML = trp3_title_2;}
                    else                                {elm.innerHTML = trp3_title_1;}
                })
            </script>
        </a>
        <!--// 折り畳み展開ポインタ -->
            
        <!-- 折り畳まれ部分 -->
        <div id="trp3_open" style="display:none;clear:both;">
        　クリア
        </div>
        <!--ここの部分が折りたたまれる＆展開される部分になります。
        自由に記述してください。-->  
    </div>
    <!-- /trp3 -->

    <br>

    <!-- trp4 -->
    <div style="background-color:#33aa77;">
        <a id="trp4_title" style="cursor:pointer;" onclick="obj=document.getElementById('trp4_open').style; obj.display=(obj.display=='none')?'block':'none';">
            trp4_dummy
            <script>
                var trp4_title_1 = '▼ trp_story_4';
                var trp4_title_2 = '▲ trp_story_4';
                addEventListener('load' ,function(){
                    document.getElementById('trp4_title').innerHTML = trp4_title_1;
                })
                document.getElementById('trp4_title').addEventListener('click' ,function(){
                    var elm = document.getElementById('trp4_title');
                    if(elm.innerHTML === trp4_title_1)  {elm.innerHTML = trp4_title_2;}
                    else                                {elm.innerHTML = trp4_title_1;}
                })
            </script>
        </a>
        
        <div id="trp4_open"  style="display:none;clear:both;">
            <a>　</a><!-- 全角スペース -->
            <a style="cursor:pointer;" onclick="innerHTML='ク'">■</a>
            <a style="cursor:pointer;" onclick="innerHTML='リ'">■</a>
            <a style="cursor:pointer;" onclick="innerHTML='ア'">■</a>
        </div>
    </div>
    <!-- /trp4 -->

    <br>

    <!-- trp5 -->
    <div style="background-color:#00cccc;">
        <a id="trp5_title" style="cursor:pointer;" onclick="obj=document.getElementById('trp5_open').style; obj.display=(obj.display=='none')?'block':'none';">
            trp5_dummy
            <script>
                var trp5_titles = ['▼ trp_story_5','▲ trp_story_5'];
                addEventListener('load' ,function(){
                    document.getElementById('trp5_title').innerHTML = trp5_titles[0];
                })
                document.getElementById('trp5_title').addEventListener('click' ,function(){
                    var elm = document.getElementById('trp5_title');
                    if(elm.innerHTML === trp5_titles[0]){elm.innerHTML = trp5_titles[1];}
                    else                                {elm.innerHTML = trp5_titles[0];}
                })
            </script>
        </a>
        
        <div id="trp5_open"  style="display:none;clear:both;">
            <script>
                var trp5_slot = ['ク','リ','ア'];
                var trp5_slot_len = 3;
                var trp5_slot_id = [];
                var trp5_slot_num = [];
                var trp5_rolling = [];

                function slotAction(){
                    var rolling_i = -1;
                    for(let i = 0; i < trp5_slot_len; i++){
                        if(trp5_rolling[i]){
                            rolling_i = i;
                            break;
                        }
                    }

                    if(rolling_i === -1){
                        function slot(i){
                            return document.getElementById(trp5_slot_id[i]).innerHTML;
                        }
                        if(slot(0) === 'ク' && slot(1) === 'リ' && slot(2) === 'リ'){
                            if(document.getElementById('trp5_invisible_slot_id').innerHTML === 'ン'){
                                document.getElementById('trp5_invisible_slot_id').innerHTML = '';
                            }else{
                                document.getElementById('trp5_invisible_slot_id').innerHTML = "ン";
                                return;
                            }
                        }
                        if(slot(0) === 'ク' && slot(1) === 'リ' && slot(2) === 'ア'){
                            if(document.getElementById('trp5_invisible_slot_id').innerHTML === '★'){
                                document.getElementById('trp5_invisible_slot_id').innerHTML = '';
                            }else{
                                document.getElementById('trp5_invisible_slot_id').innerHTML = "★";
                                return;
                            }
                        }

                        for(var i = 0; i < trp5_slot_len; i++){
                            trp5_rolling[i] = true;
                        }
                    }else{
                        trp5_rolling[ rolling_i ] = false;
                    }
                }
                
                document.write('<div onclick="slotAction();" style="cursor:pointer;user-select:none;" onCopy="return false;">');
                document.write('<br>');
                document.write('　');
                for(let i = 0; i < trp5_slot_len; i++){
                    trp5_slot_id.push('trp5_slot'+i);
                    trp5_slot_num.push(i % trp5_slot.length);
                    trp5_rolling.push(true);
                    document.write('<span id='+trp5_slot_id[i]+'>dummy</span>');
                }
                document.write('<span id="trp5_invisible_slot_id"></span>');
                document.write('<br>');
                document.write('　');
                document.write('</div>');

                function trp5_roll(){
                    for(var i = 0; i < trp5_slot_len; i++){
                        if(trp5_rolling[i]){
                            trp5_slot_num[i] = (trp5_slot_num[i]+1) % trp5_slot.length;

                            document.getElementById(trp5_slot_id[i]).innerHTML = trp5_slot[ trp5_slot_num[i] ];
                        }
                    }
                }
                setInterval(trp5_roll ,50);
            </script>
        </div>
    </div>
    <!-- /trp5 -->

    <br>

    <!-- trp6 -->
    <div style="background-color:#e44ea0;">
        <a id="trp6_title" style="cursor:pointer;user-select:none;" onclick="obj=document.getElementById('trp6_open').style; obj.display=(obj.display=='none')?'block':'none';">
            trp6_dummy
            <script>
                var trp6_titles = ['▼ trp_story_6','▲ trp_story_6'];
                var trp6_titles_index = 0;
                addEventListener('load' ,function(){
                    document.getElementById('trp6_title').innerHTML = trp6_titles[0];
                })
                document.getElementById('trp6_title').addEventListener('click' ,function(){
                    document.getElementById('trp6_title').innerHTML = trp6_titles[ ++trp6_titles_index % trp6_titles.length ];
                })
            </script>
        </a>
        
        <div id="trp6_open" style="display:none;clear:both;">
            <script>
                var trp6_x_len = 8;
                var trp6_y_len = 8;
                var trp6_squares = [];
                var trp6_squares_id = [];
                var trp6_block = '■';
                var trp6_air = '☆';
                var trp6_clear_indexes = [
                     [0,0]//y,x
                    ,[0,0]
                    ,[0,0]
                ];

                for(let y = 0; y < trp6_y_len; y++){
                    let line = [];
                    let ids = [];
                    for(let x = 0; x < trp6_x_len; x++){
                        line.push( trp6_block );
                        let id_num = y * trp6_x_len + x;
                        ids.push( 'trp6_square_id'+id_num );
                    }
                    trp6_squares.push( line );
                    trp6_squares_id.push( ids );
                }
                {
                    let y = Math.floor( Math.random() * trp6_y_len );
                    let x = Math.floor( Math.random() * trp6_x_len );
                    trp6_squares[y][x] = trp6_air;
                }
                {
                    let phase = 0;
                    while(true){
                        let y = Math.floor( Math.random() * trp6_y_len );
                        let x = Math.floor( Math.random() * trp6_x_len );

                        if(trp6_squares[y][x] === trp6_block){
                            if(phase === 0){
                                trp6_squares[y][x] = 'ク';
                                trp6_clear_indexes[0] = [y,x];
                            }else if(phase === 1){
                                trp6_squares[y][x] = 'リ';
                                trp6_clear_indexes[1] = [y,x];
                            }else if(phase === 2){
                                trp6_squares[y][x] = 'ア';
                                trp6_clear_indexes[2] = [y,x];
                            }else{
                                break;
                            }

                            phase++;
                        }
                    }   
                }

                function trp6_drawSquare(y,x){
                    document.getElementById( trp6_squares_id[y][x] ).innerHTML = trp6_squares[y][x];
                }

                function trp6_drawSquares(){
                    for(let y = 0; y < trp6_squares.length; y++){
                        for(let x = 0; x < trp6_squares[y].length; x++){
                            trp6_drawSquare(y,x);
                        }
                    }
                }

                function trp6_clickSquare(y,x){
                    let add = [
                         [-1, 0]//y,x
                        ,[ 0, 1]
                        ,[ 1, 0]
                        ,[ 0,-1]
                    ];
                    for(let i = 0; i < add.length; i++){
                        let _y = y + add[i][0];
                        let _x = x + add[i][1];
                        if(_y < 0 || _y >= trp6_squares.length || _x < 0 || _x >= trp6_squares[_y].length){continue;}

                        let square = trp6_squares[_y][_x];
                        if(square === trp6_air){
                            trp6_squares[_y][_x] = trp6_squares[y][x];
                            trp6_squares[y][x] = trp6_air;
                            
                            trp6_drawSquare(y,x);
                            trp6_drawSquare(_y,_x);

                            if(trp6_squares[_y][_x] === 'ク'){trp6_clear_indexes[0] = [_y,_x];}
                            if(trp6_squares[_y][_x] === 'リ'){trp6_clear_indexes[1] = [_y,_x];}
                            if(trp6_squares[_y][_x] === 'ア'){trp6_clear_indexes[2] = [_y,_x];}

                            if(trp6_squares[_y][_x] !== trp6_block){
                                trp6_checkClear();
                            }

                            break;
                        }
                    }
                }

                function trp6_checkClear(){
                    let ku = trp6_clear_indexes[0];
                    let ri = trp6_clear_indexes[1];
                    let a  = trp6_clear_indexes[2];

                    let clear = function(){
                        document.getElementById('trp6_invisible_clear_id').innerHTML = 'クリア★';
                    };
                    //クリア
                    if(ri[0] === ku[0] && ri[1] === ku[1]+1 && a[0] === ku[0] && a[1] === ku[1]+2){
                        clear();
                        return;
                    }
                    //ク＿＿
                    //リ＿＿
                    //ア＿＿
                    if(ri[0] === ku[0]+1 && ri[1] === ku[1] && a[0] === ku[0]+2 && a[1] === ku[1]){
                        clear();
                        return;
                    }
                    //ク＿＿
                    //＿リ＿
                    //＿＿ア
                    if(ri[0] === ku[0]+1 && ri[1] === ku[1]+1 && a[0] === ku[0]+2 && a[1] === ku[1]+2){
                        clear();
                        return;
                    }
                }
                
                document.write('<div style="cursor:pointer;user-select:none;">');
                document.write('<br>');
                for(let y = 0; y < trp6_squares.length; y++){
                    for(let x = 0; x < trp6_squares[y].length; x++){
                        let onclick = 'onclick="trp6_clickSquare('+y+','+x+');"';
                        document.write('<span id='+trp6_squares_id[y][x]+' '+onclick+'>dummy</span>');
                    }
                    document.write('<br>');
                }
                document.write('<br>');
                document.write('<span id="trp6_invisible_clear_id"></span>');
                document.write('　');
                document.write('</div>');


                trp6_drawSquares();

            </script>
        </div>
    </div>
    <!-- /trp6 -->

    <br>
    
    <!-- trp7 -->
    <div style="background-color:#88c7aa;">
        <a id="trp7_title" style="cursor:pointer;user-select:none;" 
            onclick="obj=document.getElementById('trp7_open').style;obj.display=(obj.display=='none')?'block':'none';"
        >
            trp7_dummy
            <script>
                var trp7_titles = ['▼ trp_story_7','▲ trp_story_7'];
                var trp7_title_id = document.getElementById('trp7_title');
                addEventListener('load' ,function(){
                    trp7_title_id.innerHTML = trp7_titles[0];
                })
                trp7_title_id.addEventListener('click' ,function(){
                    if(trp7_title_id.innerHTML === trp7_titles[0])  {trp7_title_id.innerHTML = trp7_titles[1];}
                    else                                            {trp7_title_id.innerHTML = trp7_titles[0];}
                })
            </script>
        </a>
        
        <div id="trp7_open" style="display:none;clear:both;cursor:pointer;">
            <span style="color:#88c7aa;">　クリア</span>
        </div>
    </div>
    <!-- /trp7 -->

    <br>
    
    <!-- trp7a -->
    <div style="background-color:#AAAA00;">
        <a id="trp7a_title" style="cursor:pointer;user-select:none;" >
            trp7a_dummy
            <script>
                var trp7a_titles = ['▼ trp_story_7a','▲ trp_story_7a'];
                var trp7a_title_id = document.getElementById('trp7a_title');
                addEventListener('load' ,function(){
                    trp7a_title_id.innerHTML = trp7a_titles[0];
                })
                trp7a_title_id.addEventListener('click' ,function(){
                    if(trp7a_title_id.innerHTML === trp7a_titles[0])  {trp7a_title_id.innerHTML = trp7a_titles[1];}
                    else                                              {trp7a_title_id.innerHTML = trp7a_titles[0];}
                    document.title = 'クリア'
                })
            </script>
        </a>
    </div>
    <!-- /trp7a -->

    <br>

    <!-- trp8 -->
    <!--
    <div id="trp8" style="background-color:#5555FF;"></div>
    <script type="text/javascript" src="trp8.js"></script>
    -->
    <!-- /trp8 -->
</body>

</html>